<html>
<body metal:use-macro="here/main_template/macros/master">
<metal:js fill-slot="javascript_head_slot">
	<script type="text/javascript" 
    tal:attributes="src string:${view/static}/comments.js"></script>
	<script type="text/javascript" 
    tal:attributes="src string:${view/static}/ajax_comments-curtir.js"></script>
</metal:js>	
	
<metal:block fill-slot="top_slot">
        <tal:dummy tal:define="dummy python:request.set('disable_border',1)" />
</metal:block>
    
    <div metal:fill-slot="content" tal:define="member python:context.portal_membership.getAuthenticatedMember();
											   logado python:str(member)!='Anonymous User';
											   form_data view/load_list | python:{};
											   user form_data/username|nothing">
											   
		<link rel="stylesheet" type="text/css" href="/++resource++vindula.myvindula/myvindula_comments.css" />
		
    	<tal:cont tal:condition="form_data">
	    	<tal:cond tal:condition="python: str(member)==form_data.username">
	    		<input id="user-igual" type="hidden" value="True">
				<metal:use use-macro="context/@@myvindulapanel/macros/page"/>                
		    </tal:cond>
			<tal:cont tal:condition="python: str(member)!=form_data.username">
				<input id="user-igual"  type="hidden" value="False">
				<div id="edit-bar">
		            <h5 class="hiddenStructure">Visões</h5>
		
		            <ul id="content-views" class="contentViews">
		            	<li class="selected" id="howareu">
		                    <a id="howareu" style="cursor:pointer;" >Pensamentos</a>
		                </li>
						<li class="plain" id="perfil">
		                    <a id="perfil"  style="cursor:pointer;" >Perfil</a>
		                </li>
		            </ul><div class="contentActions">&nbsp;</div>
	        	</div>
			</tal:cont>	
    	</tal:cont>
		<input type="hidden" id="portal_url" tal:attributes="value context/portal_url|nothing">
		<input type="hidden" id="context_url" tal:attributes="value string:${context/REQUEST/getURL|nothing}?user=${context/REQUEST/form/user|nothing}">
		<input type="hidden" id="username" name="username" value="" tal:attributes="value context/@@plone_portal_state/member|nothing">
		<div id="content">
			<div id="interna" class="userpage ">
				 <h2 class="h2title">Informa&ccedil;&otilde;es do Perfil</h2>
	
				<div class="titulo">
					<h2 tal:content="form_data/name|nothing"></h2>
				</div>
				
				<div class="department">
					<tal:def define="departamentos python: view.get_department(user)">
		        		<tal:rep repeat="departamento departamentos">
		        			<span tal:content="departamento/Title|nothing">Departamento</span> |
		        		</tal:rep>
		        	</tal:def>
					<!--span tal:content="form_data/departamento/name|nothing"></span-->
				</div>
				
				<!-- start: Personal Information -->
				<div id="personal">
					<div id="photo">    
			            <img tal:define="photo form_data/username|nothing; img python:view.getPhoto(photo)" 
			                 tal:condition="img"
			                tal:attributes="src img">
					</div>
					<div id="data">
						<div class="area"><span>Pessoal</span></div>
						<table>
							<tr>
								<td class="field">ID</td>
								<td class="value" tal:content="form_data/employee_id|nothing"></td>
							</tr>
							<tr>
								<td class="field">Apelido</td>
								<td class="value" tal:content="form_data/nickname|nothing"></td>
							</tr>
							<tr>
								<td class="field">Pron&uacute;ncia do nome</td>
								<td class="value" tal:content="form_data/pronunciation_name|nothing"></td>
							</tr>
							<tr>
								<td class="field">Data de anivers&aacute;rio</td>
								<td class="value" tal:content="form_data/date_birth|nothing"></td>
							</tr>
						</table>
						
						<a id="send-mail" tal:attributes="href string:mailto:${form_data/email|nothing}">Enviar e-mail</a>
					</div>
				</div>
				<!-- end: Personal Information -->
			
			</div>

			<!-- Meus Pensamentos -->
			<div id="howareu" class="userpage geral_lista_comentarios">
				<h2 class="h2title">Em que estou pensando agora!</h2>
				<tal:def define="items python: view.get_howareu(user)">
					<tal:rep tal:repeat="item items">
						<div class="comment item_lista">
							<div class="commentImage">
			                    <img src="defaultUser.png"
				             		 alt="" border="0"
				             		 height="30"
				             		 tal:attributes="src python:view.getPhoto(user);
							 						 alt form_data/name|nothing;
													 title form_data/name|nothing;" />
			                </div>
							<div class="documentByLine name-user">
								<h4>
									<a tal:attributes="href string:${here/portal_url}/myvindulalistuser?user=${user}">
										<span tal:replace="form_data/name|nothing" /> | 
				                    	<span tal:replace="python:item.date_creation.strftime('%d/%m/%Y')" />
									</a>
								</h4>
			                </div>
							<div id="like" tal:condition="logado">
								<div tal:attributes="id item/id|nothing">
									<input type="hidden" name="isPlone:boolean" id="isPlone" value="False" />
									<input type="hidden" name="type" id="type" value="ModelsMyvindulaHowareu" />
								</div>
								<div metal:use-macro="context/myvindula-like-macro/macros/like" />
	
							</div>
							
			                <div class="comment-body">
			                    <p tal:replace="item/text|nothing" />
					  		</div>
							<!-- campos input necessario para a criação de comentariso -->
							<div id="comments" tal:condition="logado" >
								<div tal:attributes="id item/id|nothing">
									
									<input type="hidden" name="isPlone:boolean" id="isPlone" value="False" />
									<input type="hidden" name="type" id="type" value="ModelsMyvindulaHowareu" />
								</div>
								<input type="button" value="Comentar" class="comments bt_comments" tal:attributes="id item/id|nothing" />
								<div id="new-comments"></div>
							</div>
						</div>
						<div metal:use-macro="context/myvindula-comments-macro/macros/comments" />
					</tal:rep>	
		        </tal:def>
			</div>
			
			<div id="perfil" class="userpage"> <!-- display-none"--> 

				<!-- start: Others Information -->
				<!-- Contact -->
				<div class="area"><span>Contato</span></div>
				<img class="type-info" tal:attributes="src string:${view/static}/imagens/user_contact.png" />
				<table>
					<tr>
						<td class="field">E-mail</td>
						<td class="value" tal:content="form_data/email|nothing"></td>
					</tr>
					<tr>
						<td class="field">Telefone</td>
						<td class="value" tal:content="form_data/phone_number|nothing"></td>
					</tr>
					<tr>
						<td class="field">Localiza&ccedil;&atilde;o</td>
						<td class="value" tal:content="form_data/location|nothing"></td>
					</tr>
					<tr>
						<td class="field">Endere&ccedil;o</td>
						<td class="value" tal:content="form_data/postal_address|nothing"></td>
					</tr>
				</table>
				
				<!-- Corporative -->
				<div class="area"><span>Corporativo</span></div>
				<img class="type-info" tal:attributes="src string:${view/static}/imagens/user_business.png" />
				<table>
					<tr>
						<td class="field">Empresa</td>
						<td class="value" tal:content="form_data/enterprise|nothing"></td>
					</tr>
					<tr>
						<td class="field">Registro</td>
						<td class="value" tal:content="form_data/registration|nothing"></td>
					</tr>
					<tr>
						<td class="field">Cargo</td>
						<td class="value" tal:content="form_data/position|nothing"></td>
					</tr>
					<tr>
						<td class="field">Data de Admiss&atilde;o</td>
						<td class="value" tal:content="form_data/admission_date|nothing"></td>
					</tr>
					<tr>
						<td class="field">Centro de custo</td>
						<td class="value" tal:content="form_data/cost_center|nothing"></td>
					</tr>
					<tr>
						<td class="field">Centro de lucro</td>
						<td class="value" tal:content="form_data/profit_centre|nothing"></td>
					</tr>
					<tr>
						<td class="field">Funções Especiais</td>
						<td class="value" tal:content="form_data/special_roles|nothing"></td>
					</tr>
					<tr>
						<td class="field">Unidade organizacional</td>
						<td class="value" tal:content="form_data/organisational_unit|nothing"></td>
					</tr>
					<tr>
						<td class="field">Delega&ccedil;&otilde;es</td>
						<td class="value" tal:content="form_data/delegations|nothing"></td>
					</tr>	
					<tr>
						<td class="field">Reporta-se a</td>
						<td class="value" tal:content="form_data/reports_to|nothing"></td>
					</tr>
				</table>
				
				<!-- Others -->
				<div class="area"><span>Outras Informa&ccedil;&otilde;es</span></div>
				<img class="type-info" tal:attributes="src string:${view/static}/imagens/user_others.png" />
				<table>
					<tr>
						<td class="field">Comissão</td>
						<td class="value" tal:content="form_data/committess|nothing"></td>
					</tr>
					<tr>
						<td class="field">Projetos</td>
						<td class="value" tal:content="form_data/projetcs|nothing"></td>
					</tr>			
					<tr>
						<td class="field">Informa&ccedil;&atilde;o pessoal</td>
						<td class="value" tal:content="form_data/personal_information|nothing"></td>
					</tr>
					<tr>
						<td class="field">Habilidades</td>
						<td class="value"><!-- tal:content="form_data/skills_expertise|nothing"-->
							<tal:def define="cursos python: view.get_Courses(user)">
								<tal:cont condition="cursos">
					        		<tal:rep repeat="curso cursos">
					        			<span tal:content="python:view.getCouses_byID(curso.vin_myvindula_courses_id).title">Departamento</span> <br />
					        		</tal:rep>
								</tal:cont>
				        	</tal:def>
						</td>
					</tr>					
					<tr>
						<td class="field">Idiomas</td>
						<td class="value"><!--tal:content="form_data/languages|nothing"-->
							<tal:def define="languages python: view.get_Languages(user)">
								<tal:cont condition="languages">
					        		<tal:rep repeat="language languages">
					        			<span tal:content="python:view.getLanguages_byID(language.vin_myvindula_languages_id).title">Departamento</span> <br />
					        		</tal:rep>
								</tal:cont>
				        	</tal:def>
						</td>
					</tr>		
					<tr>
						<td class="field">Disponibilidade</td>
						<td class="value" tal:content="form_data/availability|nothing"></td>
					</tr>				
					<tr>
						<td class="field">Artigos publicados</td>
						<td class="value" tal:content="form_data/papers_published|nothing"></td>
					</tr>	
					<tr>
						<td class="field">Teaching Research</td>
						<td class="value" tal:content="form_data/teaching_research|nothing"></td>
					</tr>					
					<tr>
						<td class="field">Resumo</td>
						<td class="value" tal:content="form_data/resume|nothing"></td>
					</tr>	
					<tr>
						<td class="field">Blogs</td>
						<td class="value" tal:content="form_data/blogs|nothing"></td>
					</tr>				
					<tr>
						<td class="field">Mensagem personalizada</td>
						<td class="value" tal:content="form_data/customised_message|nothing"></td>
					</tr>
				</table>
				<!-- end: Others Information -->
			</div>
			
			<div id="recados" class="userpage geral_lista_comentarios" tal:condition="view/check_recados">
				<h2 class="h2title" tal:content="string:Deixe seu recado para o ${form_data/name|nothing} !"></h2>
	    			<tal:def define="items python:view.get_recados(user);">
						<div class="userpage geral_lista_comentarios" tal:condition="items">
							<tal:rep tal:repeat="item items">
								<div class="comment item_lista" tal:define="user item/username|nothing;
																			form_data python:view.get_prefs_user(user) or {};"> 
									<div class="commentImage">
					                    <img src="defaultUser.png" alt="" border="0" height="30"
						             		 tal:attributes="src python:view.getPhoto(user);
									 						 alt form_data/name|nothing;
															 title form_data/name|nothing;" />
					                </div>
									<div class="documentByLine name-user">
										<h4><a tal:attributes="href string:${here/portal_url}/myvindulalistuser?user=${user}">
												<span tal:replace="form_data/name|nothing" /> | 
						                    	<span tal:replace="python:item.date_creation.strftime('%d/%m/%Y')" />
											</a></h4>
					                </div>
									<div id="like" tal:condition="logado">
										<div tal:attributes="id item/id|nothing">
											<input type="hidden" name="isPlone:boolean" id="isPlone" value="False" />
											<input type="hidden" name="type" id="type" value="ModelsMyvindulaRecados" />
										</div>
										<div metal:use-macro="context/myvindula-like-macro/macros/like" />
									</div>
					                <div class="comment-body">
					                    <p tal:replace="item/text|nothing" />
							  		</div>
									<!-- campos input necessario para a criação de comentariso -->
									<div id="comments" tal:condition="logado" >
										<div tal:attributes="id item/id|nothing">
											<input type="hidden" name="isPlone:boolean" id="isPlone" value="False" />
											<input type="hidden" name="type" id="type" value="ModelsMyvindulaRecados" />
										</div>
										<input type="button" value="Comentar" class="comments bt_comments" tal:attributes="id item/id|nothing" />
										<div id="new-comments"></div>
									</div>
								</div>
								<div metal:use-macro="context/myvindula-comments-macro/macros/comments" />
							</tal:rep>	
						</div>
					</tal:def>
					<!-- Recados Input -->
					<div id="comment-geral" tal:condition="logado">
						<form action="" method="post" enctype="multipart/form-data" name="save-recados" tal:attributes="action string:${context/absolute_url}/myvindulalistuser?user=${user}">	
							
							<input type="hidden" name="destination" value="" tal:attributes="value user">	
							<input type="hidden" name="username" value="" tal:attributes="value context/@@plone_portal_state/member|nothing">
							<textarea  style="width: 100%; height: 81px;" name="text"></textarea>
			
							<div class="bt_comentar">
								<input type="hidden" name="form.submitted:boolean" value="True" />
								<input type="submit" name="submit" value="Recados" id="save-recados" />
							</div>
						</form>
					</div>
			</div>
		</div>
    </div>    
</body>
</html>