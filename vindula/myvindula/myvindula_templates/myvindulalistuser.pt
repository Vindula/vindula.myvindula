<html metal:use-macro="here/main_template/macros/master">
    <head>
        <metal:js fill-slot="javascript_head_slot">
            <script type="text/javascript" tal:attributes="src string:${view/static}/js/perfil.js"></script>
            <script type="text/javascript" tal:attributes="src string:${view/static}/js/mascara.js"></script>

        </metal:js>            
        <metal:block fill-slot="top_slot">
              <tal:dummy tal:define="dummy python:request.set('disable_border',1);
                       disable_column_one python:request.set('disable_plone.leftcolumn',1);
                       disable_column_two python:request.set('disable_plone.rightcolumn',1);" />
        </metal:block>
     </head>
    <body>
        <div metal:fill-slot="content" tal:define="member python:context.portal_membership.getAuthenticatedMember();
    											   isAnonymous context/portal_membership/isAnonymousUser|python:True;
    											   form_data view/load_list | python:{};
    											   user_perfil form_data/username|nothing;
    											   panelView python:context.restrictedTraverse('@@myvindula-conf-userpanel')" >
    											   
        	<tal:cont tal:condition="form_data">
    			<tal:cond tal:condition="python: str(member.getUserName())==form_data.username">
    	    		<input id="user-igual" type="hidden" value="True">
    				<metal:use use-macro="context/@@myvindulapanel/macros/page"/>                
    		    </tal:cond>
    			
    			<tal:cont tal:condition="python: str(member.getUserName())!=form_data.username">
    				<input id="user-igual"  type="hidden" value="False">
    				<div id="edit-bar">
    		            <h5 class="hiddenStructure">Visões</h5>
    		
    		            <ul id="content-views" class="contentViews">
    		            	<li class="selected" id="perfil-menu">
    		                    <a id="perfil-menu"  style="cursor:pointer;" >Perfil P&uacute;blico</a>
    		                </li>
    		            	<li class="plain" id="howareu-menu" tal:condition="panelView/check_pensamentos">
    		                    <a id="howareu-menu" style="cursor:pointer;" >Pensamentos</a>
    		                </li>
    						<li class="plain" id="scraps-menu" tal:condition="panelView/check_recados">
    		                    <a id="scraps-menu"  style="cursor:pointer;" >Recados</a>
    		                </li>
    		            </ul><div class="contentActions">&nbsp;</div>
    	        	</div>
    			</tal:cont>	
        	</tal:cont>
        	
   		
    		<div id="content">
                <!-- Perfil do usuarios  -->
    			<div metal:use-macro="context/myvindula-user-perfil/macros/page-view" />
    			
    			<!-- Meus Pensamentos -->
                <div id="howareu" class="userpage geral_lista_comentarios" tal:condition="panelView/check_pensamentos">
                    <h2 class="h2title" tal:content="string: No que ${form_data/name|nothing} est&aacute; pensando!"></h2>
                    
                    <tal:def define="items python: view.get_howareu(user);
                                     comment_type string:ModelsMyvindulaHowareu">
                        <tal:rep tal:repeat="item items">
    
                            <div metal:use-macro="context/macro-single-howareu/macros/page" />
    
<<<<<<< HEAD
    					</tal:rep>	
    		        </tal:def>
    			</div>
    			
    			<div id="perfil" class="userpage"> <!-- display-none"--> 
    				<!-- start: Others Information -->
    				<!-- Contact -->
    				<div id="grupo" tal:condition="view/valida_contato|nothing">
    					<div class="area"><span >Contato</span></div>
    					<img class="type-info" tal:attributes="src string:${view/static}/images/user_contact.png" />
    					<table>
    						<tr tal:condition="python: view.get_ConfugCampos('phone_number')">
    							<td class="field" tal:content="python: view.get_label_filed('phone_number')">Telefone</td>
    							<td class="value" tal:content="form_data/phone_number|nothing"></td>
							
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('cell_phone')">
    							<td class="field" tal:content="python: view.get_label_filed('cell_phone')">Celular</td>
    							<td class="value" tal:content="form_data/cell_phone|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('location')">
    							<td class="field" tal:content="python: view.get_label_filed('location')">Localiza&ccedil;&atilde;o</td>
    							<td class="value" tal:content="form_data/location|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('postal_address')">
    							<td class="field" tal:content="python: view.get_label_filed('postal_address')">Endere&ccedil;o</td>
    							<td class="value" tal:content="form_data/postal_address|nothing"></td>
    						</tr>
    					</table>
    				</div>
    				
    				<!-- Corporative -->
    				<div id="grupo" tal:condition="view/valida_corporativo|nothing" >
    					<div class="area"><span>Corporativo</span></div>
    					<img class="type-info" tal:attributes="src string:${view/static}/images/user_business.png" />
    					<table>
    						<tr tal:condition="python: view.get_ConfugCampos('enterprise')">
    							<td class="field" tal:content="python: view.get_label_filed('enterprise')">Empresa</td>
    							<td class="value" tal:content="form_data/enterprise|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('registration')">
    							<td class="field" tal:content="python: view.get_label_filed('registration')">Registro</td>
    							<td class="value" tal:content="form_data/registration|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('position')">
    							<td class="field" tal:content="python: view.get_label_filed('position')">Cargo</td>
    							<td class="value" tal:content="form_data/position|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('admission_date')">
    							<td class="field" tal:content="python: view.get_label_filed('admission_date')">Data de Admiss&atilde;o</td>
    							<td class="value" tal:condition="form_data/admission_date|nothing"  
    											  tal:content="python:form_data.admission_date.strftime('%d/%m/%Y')"></td>
    							<td class="value" tal:condition="not: form_data/admission_date|nothing"></td>  
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('cost_center')">
    							<td class="field" tal:content="python: view.get_label_filed('cost_center')">Centro de custo</td>
    							<td class="value" tal:content="form_data/cost_center|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('profit_centre')">
    							<td class="field" tal:content="python: view.get_label_filed('profit_centre')">Centro de lucro</td>
    							<td class="value" tal:content="form_data/profit_centre|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('special_roles')">
    							<td class="field" tal:content="python: view.get_label_filed('special_roles')">Funções Especiais</td>
    							<td class="value" tal:content="form_data/special_roles|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('organisational_unit')">
    							<td class="field" tal:content="python: view.get_label_filed('organisational_unit')">Unidade organizacional</td>
    							<td class="value" tal:content="form_data/organisational_unit|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('delegations')">
    							<td class="field" tal:content="python: view.get_label_filed('delegations')">Delega&ccedil;&otilde;es</td>
    							<td class="value" tal:content="form_data/delegations|nothing"></td>
    						</tr>	
    						<tr tal:condition="python: view.get_ConfugCampos('reports_to')">
    							<td class="field" tal:content="python: view.get_label_filed('reports_to')">Reporta-se a</td>
    							<td class="value" tal:content="form_data/reports_to|nothing"></td>
    						</tr>
    					</table>
    				</div>	
    				
    				<!-- Others -->
    				<div id="grupo" tal:condition="view/valida_others|nothing">
    					<div  class="area"><span>Outras Informa&ccedil;&otilde;es</span></div>
    					<img class="type-info" tal:attributes="src string:${view/static}/images/user_others.png" />
    					<table>
    						<tr tal:condition="python: view.get_ConfugCampos('committess')">
    							<td class="field" tal:content="python: view.get_label_filed('committess')">Comissão</td>
    							<td class="value" tal:content="form_data/committess|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('projects')">
    							<td class="field" tal:content="python: view.get_label_filed('projects')">Projetos</td>
    							<td class="value" tal:content="form_data/projects|nothing"></td>
    						</tr>			
    						<tr tal:condition="python: view.get_ConfugCampos('personal_information')">
    							<td class="field" tal:content="python: view.get_label_filed('personal_information')">Informa&ccedil;&atilde;o pessoal</td>
    							<td class="value" tal:content="form_data/personal_information|nothing"></td>
    						</tr>
    						<tr tal:condition="python: view.get_ConfugCampos('skills_expertise')">
    							<td class="field" tal:content="python: view.get_label_filed('skills_expertise')">Habilidades</td>
    							<td class="value"><!-- tal:content="form_data/skills_expertise|nothing"-->
    								<tal:def define="cursos python: view.get_Courses(user)">
    									<tal:cont condition="cursos">
    						        		<tal:rep repeat="curso cursos">
    						        			<span tal:content="python:view.getCouses_byID(curso.vin_myvindula_courses_id).title">Departamento</span> <br />
    						        		</tal:rep>
    									</tal:cont>
    					        	</tal:def>
    							</td>
    						</tr>					
    						<tr tal:condition="python: view.get_ConfugCampos('languages')" >
    							<td class="field" tal:content="python: view.get_label_filed('languages')">Idiomas</td>
    							<td class="value"><!--tal:content="form_data/languages|nothing"-->
    								<tal:def define="languages python: view.get_Languages(user)">
    									<tal:cont condition="languages">
    						        		<tal:rep repeat="language languages">
    						        			<span tal:content="python:view.getLanguages_byID(language.vin_myvindula_languages_id).title">Departamento</span> <br />
    						        		</tal:rep>
    									</tal:cont>
    					        	</tal:def>
    							</td>
    						</tr>		
    						<tr tal:condition="python: view.get_ConfugCampos('availability')" >
    							<td class="field" tal:content="python: view.get_label_filed('availability')">Disponibilidade</td>
    							<td class="value" tal:content="form_data/availability|nothing"></td>
    						</tr>				
    						<tr tal:condition="python: view.get_ConfugCampos('papers_published')">
    							<td class="field" tal:content="python: view.get_label_filed('papers_published')">Artigos publicados</td>
    							<td class="value" tal:content="form_data/papers_published|nothing"></td>
    						</tr>	
    						<tr tal:condition="python: view.get_ConfugCampos('teaching_research')">
    							<td class="field" tal:content="python: view.get_label_filed('teaching_research')">CPF</td>
    							<td class="value" tal:content="form_data/teaching_research|nothing"></td>
    						</tr>					
    						<tr tal:condition="python: view.get_ConfugCampos('resume')">
    							<td class="field" tal:content="python: view.get_label_filed('resume')">Resumo</td>
    							<td class="value" tal:content="form_data/resume|nothing"></td>
    						</tr>	
    						<tr tal:condition="python: view.get_ConfugCampos('blogs')">
    							<td class="field" tal:content="python: view.get_label_filed('blogs')">Blogs</td>
    							<td class="value" tal:content="form_data/blogs|nothing"></td>
    						</tr>				
    						<tr tal:condition="python: view.get_ConfugCampos('customised_message')">
    							<td class="field" tal:content="python: view.get_label_filed('customised_message')">Mensagem personalizada</td>
    							<td class="value" tal:content="form_data/customised_message|nothing"></td>
    						</tr>
    					</table>
    				</div>
    				<!-- end: Others Information -->
    			</div>
=======
                        </tal:rep>  
                    </tal:def>
                </div>
>>>>>>> 249c41e699c59bfa5d197a7ecb1bac98691d0504
    			
    			
    			<!-- start: Scraps -->
    			<div id="scraps" class=" geral_lista_comentarios" tal:condition="panelView/check_recados">
    				
    				<!-- Scraps Input -->
    				<div id="comment-geral" tal:condition="not: isAnonymous">
    					<h2 class="h2title" tal:content="string:Deixe um recado para ${form_data/name|nothing}:"></h2>
    					<form action="" method="post" enctype="multipart/form-data" name="save-recados" 
      						  tal:attributes="action string:${context/absolute_url}/myvindulalistuser?user=${context/REQUEST/form/user|nothing}&scraps=true">	
    						
    						<input type="hidden" name="destination" value="" tal:attributes="value user_perfil">	
    						<input type="hidden" name="username" value="" tal:attributes="value python:member.getUserName()">
    						
    						<tal:cond condition="panelView/check_ativa_richtext|python:False">
                                    <input class="cke_config_url" type="hidden" name="cke_config_url" tal:attributes="value string:${context/portal_url}/ckeditor_plone_config.js">
                                    <input class="cke_iswidget" type="hidden" value="True" name="cke_iswidget">
                                    <div class="widget_settings">
                                        <input class="cke_baseHref" type="hidden" name="cke_baseHref" tal:attributes="value string:${context/portal_url}" >
                                        <input class="cke_height" type="hidden" value="100px" name="cke_height">
                                    </div>
                
                                <textarea style="width: 100%; height: 85px;" name="text"  tal:define="idRandom python:str(panelView.randomIdComents())" 
                                                                                          tal:attributes="id string:text_coments_${idRandom}" 
                                                                                          class="ckeditor_plone"></textarea>
                            
                            </tal:cond>
    						
    						
    						<textarea tal:condition="not:panelView/check_ativa_richtext|python:True "  style="width: 100%; height: 81px;" name="text"></textarea>
    		
    						<div class="bt_comentar">
    							<input type="hidden" name="form.submitted:boolean" value="True" />
    							<input type="submit" name="submit" value="Publicar" id="save-recados" />
    						</div>
    					</form>
    				</div>
    				
    				<!-- Scraps List -->
        			<tal:def define="items python:view.get_recados(user_perfil);">
    					<div class="userpage geral_lista_comentarios" tal:condition="items">
    						<h2 class="h2title">Outros recados!</h2>
    						
    						<tal:rep tal:repeat="item items">
    							<div class="comment item_lista" tal:define="user_item item/username|nothing;
    																		form_data python:view.get_prefs_user(user_item) or {};"
    																		
    															tal:condition="python: (str(member.getUserName()) == user_perfil) or 
    																				   (str(member.getUserName()) == str(user_item)) or
     																				   ('Manager' in member.getRoles()) or 
     																				   panelView.check_filtro_recados_user_publicos()" > 
                                    
                                    <div metal:use-macro="context/macro-myvindula-documentByLine/macros/page"> </div>

    								<div id="like" tal:condition="not: isAnonymous" >
    									<div tal:attributes="id item/id|nothing">
    										<input type="hidden" name="isPlone:boolean" id="isPlone" value="False" />
    										<input type="hidden" name="type" id="type" value="ModelsMyvindulaRecados" />
    									</div>
    									<div metal:use-macro="context/myvindula-like-macro/macros/like" ></div>
    								</div>
    								
    				                <div class="comment-body">
    				                    <p tal:replace="structure item/text|nothing" />
    						  		</div>
    								
    								<!--Macros de repitição dos comentarios --> 
    								<tal:def define="comment_type string:ModelsMyvindulaRecados">        
                                        <div metal:use-macro="context/macro-input-comments/macros/input" />
                                        <div metal:use-macro="context/myvindula-comments-macro/macros/comments" />
    								</tal:def>
    							</div>
    						</tal:rep>	
    					</div>
    				</tal:def>
    			</div>
    			<!-- end: Scraps -->
    			
    		</div>
        </div>    
    </body>
</html>
