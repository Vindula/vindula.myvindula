<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
         xmlns:tal="http://xml.zope.org/namespaces/tal"
         xmlns:metal="http://xml.zope.org/namespaces/metal"
         xmlns:i18n="http://xml.zope.org/namespaces/i18n"
         lang="en"
         metal:use-macro="context/prefs_main_template/macros/master"
         i18n:domain="plone">
   
   <head>
  </head>  
  <body>
  <metal:main fill-slot="prefs_configlet_content">
        <script type="text/javascript">
            function confirmExcluirCampo(){
                if (confirm('Tem certeza que deseja excluir este campo?')){
                    return true;
                }else{
                    return false;
                }
            };            
        </script>    
        <div id="content" tal:define="form_data view/load_form | python:{};
                                      form_values form_data/data | python:{}">
            
            <h1>Campos do Perfil de usu&aacute;rio</h1>
            <h2 tal:content="string:Editar o Campo '${form_values/label|nothing}' do formularios"> </h2>
            
            <div id="interna" >         
                <form name="myvindulaconfgs" id="myvindulaconfgs" enctype="multipart/form-data"
                      class="enableAutoFocus" tal:attributes="action  string:${context/absolute_url}/edit_myvindulaconfgs" method="POST">

                    <fieldset>
                        <legend>Campos Habilitados Para Edição</legend>
                        <!-- edit Form -->
                        <input id="form.edit" type="hidden" value="True" name="form.edit:boolean" tal:condition="request/fields|nothing">
                        
                        <tal:def define="html python:view.geraCampos(form_data)">
                            <tal:rep repeat="x html">
                                <div tal:content="structure x" />
                            </tal:rep>
                        </tal:def>
                    
                    </fieldset>
                    
                    <div class="visualClear"></div>
                    <!-- Botões de ação --> 
                    <fieldset>
                        <br />      
                        <div style="float:left; width:100%" tal:define="field request/fields|nothing">
                            <input style="width:100px" class="button-erp" type="submit" value="Voltar" name="form.voltar">
                            <input style="width:100px;" class="button-erp" type="submit" value="Salvar" name="form.submited">
                            
                            <input tal:condition="python: (field and not field in view.BlackList) or None"
                                   onclick="return confirmExcluirCampo();" style="width:100px;"
                                   class="button-erp" type="submit" value="Excluir" name="form.excluir">    
                                
                        </div>
                    </fieldset>
                </form>
            </div>
        </div>
  </metal:main>
  </body>
</html>