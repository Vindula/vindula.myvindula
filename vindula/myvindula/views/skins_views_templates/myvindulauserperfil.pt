<html metal:use-macro="here/main_template/macros/master">
	<head>
        <metal:block fill-slot="top_slot">
            <tal:dummy tal:define="dummy python:request.set('disable_border',1);
                                   disable_column_one python:request.set('disable_plone.leftcolumn',1);
                                   disable_column_two python:request.set('disable_plone.rightcolumn',1);" />
        </metal:block>
	</head>
	<body metal:fill-slot="content">
		<meta:macro metal:define-macro="page-view">

	    	<div   tal:define="view python: context.restrictedTraverse('@@myvindulalistuser');
	    	                   isAnonymous context/portal_membership/isAnonymousUser|python:True;
                               member context/@@plone_portal_state/member;

							   user_profile view/load_list | python:{};
                               session request/SESSION|python:{};
                               username user_profile/username|nothing;
                               user_request request/user|username;
                               user_login member/getUserName;

                               followers python: view.get_follow(username);
                               activities user_profile/atividades|nothing;">

				<div id="myModal" class="reveal-modal large" >
				 	 <div class="vd_user_profile_picture" data_field="photograph" tal:attributes="data_token session/user_token;
																								 data_username username ">

					  <a class="close-reveal-modal">×</a>
					 </div>
				</div>

                <h5>
                    <tal:cond condition="python:view.get_ConfugCampos('name')">
                       <tal:cont content="user_profile/name|nothing" />
                    </tal:cond>
                    <hr/>
                </h5>

                <div class="row">
                    <div class="columns large-9">
                        <div class="row">
                            <div class="columns large-12 container-perfil">
                                <div class="container-tiles-section section-container auto" data-section>

                                    <section>
                                        <p class="title" data-section-title><a href="#panel1">Info</a></p>
                                        <div class="content bloco-perfil" data-section-content>
                                            <div id="tile-org-info">
                                                <div class="row">
                                                    <div class="columns large-3">
                                                        <div id="photo">
                                                            <tal:cond condition="python: view.get_ConfugCampos('photograph')">
                                                                <!-- Dados para utilização da macro -->
                                                                <tal:def define="size_img string:150px;
                                                                                 item user_profile;">
                                                                    <metal:use use-macro="context/myvindula-imageprofiles-macro/macros/userimage"/>
                                                                </tal:def>
                                                            </tal:cond>
                                                            <tal:cond condition="python:not view.get_ConfugCampos('photograph')">
                                                                <div style="width: 150px;height: 150px;"></div>
                                                            </tal:cond>
															<div class="edit-foto" tal:condition="python: user_login == user_request">
	                                                            <a href="#" data-reveal-id="myModal"
	                                                               tal:attributes="href string:${context/portal_url}/vindula-api/myvindula/user-profile-picture/${session/user_token}/photograph/${username}">Editar Foto</a>
															</div>
                                                        </div>
                                                    </div>

                                                    <div class="columns large-9">
                                                        <div class="vd-social-left rigth" tal:define="UID username;
                                                                                                      TYPES string:UserObject;"
                                                                                           tal:condition="python: user_login != user_request">

                                                            <div metal:use-macro="context/macro-follow-content/macros/view" />
                                                        </div>
                                                    </div>

                                                    <div class="columns large-9">
                                                        <div>
                                                            <h5>Apresentação</h5>
                                                            <span tal:content="user_profile/about|string: ">Lorem ipsum dolor sit amet, consectetur adipiscing elit.
                                                            Nam ut imperdiet urna. Nullam a lacus velit, id sollicitudin nisi.
                                                            Curabitur at justo eget nulla pellentesque vestibulum.
                                                            </span>
                                                        </div>

                                                        <div class="container-manager">
                                                            <div>
                                                                <h4>Status</h4>
                                                            </div>
                                                            <div>
                                                                <span>
                                                                    <div class="vd_status" data_type="UserObject"
                                                                                           tal:attributes="data_uid username"></div>

                                                                </span>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div class="columns large-12 label-team">
                                                        <strong><a href="">Assinantes</a></strong>
                                                        <span tal:content="python: '('+ str(followers.count()) + ')' ">(41)</span>
                                                    </div>
                                                    <div class="columns large-12">

														<div tal:condition="not: followers/count">
															<strong> Não possui nenhum assinante</strong>
														</div>														
                                                        <div tal:condition="followers/count" class="orbit-container">
                                                          <ul data-orbit="bullets:false, " class="orbit-slides-container">

                                                            <tal:rep repeat="bloco_follow python: view.format_follow(followers)">
                                                                <li>
                                                                    <ul class="small-block-grid-9 large-block-grid-9 members-team">
                                                                        <tal:rep repeat="follower  bloco_follow">

                                                                            <li>
                                                                                <!-- Dados para utilização da macro -->
                                                                                <tal:def define="size_img string:30px;
                                                                                                 item python: view.get_prefs_user(follower.username);
                                                                                                 username follower/username;">
                                                                                    <metal:use use-macro="context/myvindula-imageprofiles-macro/macros/userimage"/>
                                                                                </tal:def>
                                                                            </li>

                                                                        </tal:rep>

                                                                        </ul>
                                                                    </li>
                                                            </tal:rep>

                                                          </ul>
                                                        </div>

                                                    </div>
                                                </div>
                                            </div>
                                        </div>
										<div class="row">
                                                <div class="columns large-6 shadow-line">
                                                        <h5>
                                                            INFORMAÇÕES
                                                            <hr/>
                                                        </h5>

                                                        <div>
                                                            <ul class="no-bullet">
                                                                <li tal:define="unidadeprincial user_profile/get_unidadeprincipal">
                                                                    <strong>Unidade:</strong>
                                                                    <a tal:attributes="href unidadeprincial/url|nothing"
                                                                       tal:content="unidadeprincial/title|string: ">ASCON</a>
                                                                </li>

                                                                <tal:rep repeat="field user_profile/fields">
                                                                    <li tal:condition="python: not field.name in view.black_list">
                                                                        <strong tal:content="field/label"></strong>
                                                                        <span tal:content="python:user_profile.get(field.name)"></span>
                                                                    </li>
                                                                </tal:rep>
                                                            </ul>
                                                        </div>
                                                    </div>

                                                    <div class="columns large-6 shadow-line">
                                                        <h5>
                                                            PARTICIPANDO
                                                            <hr/>
                                                        </h5>
                                                        <div class="content_itens">
                                                            <tal:cond condition="python: view.get_ConfugCampos('vin_myvindula_department')">
                                                                <tal:def define="departamentos user_profile/get_department">
                                                                    <p tal:repeat="departamento departamentos">
                                                                        <img width="16" height="16" alt="" tal:attributes="src departamento/obj/getImageIcone|nothing;
                                                                                                                           alt departamento/title" />
                                                                        <a tal:attributes="href departamento/url|nothing"
                                                                           tal:content="departamento/title|nothing">Lorem ipsum dolor sit amet </a>
                                                                    </p>
                                                                </tal:def>
                                                            </tal:cond>
                                                        </div>

                                                        <div>
                                                            <a href="#" class="more-icon">
                                                                <h1 class="subheader vindula-icon-plus-sign left"></h1>
                                                                <span class="left">Ver todos</span>
                                                            </a>
                                                        </div>
                                                    </div>
                                            </div>

                                            <div class="row">
                                                <div class="columns large-6">
                                                    <div id="tile-list-bullet">

                                                        <h5>
                                                            ATIVIDADES
                                                            <hr/>
                                                        </h5>

                                                        <ul class="square" tal:define="atividades python: activities or '[]' ">
                                                            <tal:rep repeat="item python: eval(atividades)">
                                                                <li><span tal:content="item">Lorem ipsum dolor sit amet</span></li>
                                                            </tal:rep>

                                                        </ul>

                                                    </div>

                                                    <div id="tile-list-bullet" class="columns large-12 shadow-line">
                                                        <!--
                                                        <h5>
                                                            PROJETOS
                                                            <hr/>
                                                        </h5>

                                                        <ul class="square">
                                                            <li><a href="#">Lorem ipsum dolor sit amet</a></li>
                                                            <li><a href="#">Consectetur adipiscing elit.</a></li>
                                                            <li><a href="#">Suspendisse mauris ante.</a></li>
                                                            <li><a href="#">Dignissim sit amet euismod id.</a></li>
                                                        </ul>

                                                        <a href="#" class="more-icon">
                                                            <h1 class="subheader vindula-icon-plus-sign left"></h1>
                                                            <span class="left">Ver todos</span>
                                                        </a>
                                                        -->
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="clear"></div>
                                        </div>
                                    </section>

                                    <section tal:condition="python: user_login == user_request" id="prefs_edit">
                                        <p class="title" data-section-title><a href="#panel2">Editar Perfil</a></p>
                                        <div class="content" data-section-content>
                                            <metal:use use-macro="context/myvindulaprefs/macros/page-view" />
                                        </div>
                                    </section>

                                    <section tal:condition="python: user_login == user_request" id="my_content">
                                        <p class="title" data-section-title><a href="#panel3">Meus Conteúdos</a></p>
                                        <div class="content" data-section-content>
                                            <metal:use use-macro="context/myvindula_my_contents/macros/page-view" />
                                        </div>
                                    </section>

                                    <section tal:condition="python: user_login == user_request" id="messages">
                                        <p class="title" data-section-title><a href="#panel3">Minhas Mensagens</a></p>
                                        <div class="content" data-section-content>
                                            <metal:use use-macro="context/myvindulalistrecados/macros/page-view" />
                                        </div>
                                    </section>
                                    <section tal:condition="python: user_login == user_request" id="notification">
                                        <p class="title" data-section-title><a href="#panel4">Minhas Notificações</a></p>
                                        <div class="content" data-section-content>
                                            <metal:use use-macro="context/myvindula-notifications/macros/page-view" />
                                        </div>
                                    </section>

                                </div>
                            </div>



                        </div>
                    </div>
                    <div class="columns large-3">

                    </div>
                </div>
	        </div>
	</meta:macro>
</body>
</html>