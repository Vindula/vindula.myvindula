<html metal:use-macro="here/main_template/macros/master">
    <head>
        <metal:block fill-slot="top_slot">
            <tal:dummy tal:define="dummy python:request.set('disable_border',1);
                                   disable_column_one python:request.set('disable_plone.leftcolumn',1);
                                   disable_column_two python:request.set('disable_plone.rightcolumn',1);" />
        </metal:block>
    </head>
    <body>

        <div metal:fill-slot="content" tal:define="check_recados context/@@myvindula-conf-userpanel/check_recados;"
    								   tal:condition="check_recados">
    		<metal:use use-macro="context/@@myvindulapanel/macros/page"/>

    		<div id="content" >
                <div id="messages" metal:define-macro="page-view"
                     class="userpage geral_lista_comentarios clear list_file"
                     tal:define="member python:context.portal_membership.getAuthenticatedMember();
                                 isAnonymous context/portal_membership/isAnonymousUser|python:True;
                                 user python:member.getUserName() or None;
                                 
                                 view_myvindula nocall:context/@@myvindula;
                                 items python:view_myvindula.get_recados(user);
                                 items python:view_myvindula.convertResultSetToList(items);
                                 
                                 Batch python:modules['Products.CMFPlone'].Batch;
                                 b_size request/b_size|string:10;
                                 b_start python:0;
                                 b_start request/b_start | b_start;

                                 batch python:Batch(items, int(b_size), int(b_start));">
                    
                        
                    <script type="application/javascript" 
                            tal:attributes="src string:${context/portal_url}/++resource++vindula.myvindula.views/js/ajax_messages.js"></script>
                    
                    <div class="columns large-12">
                        <h5>Mensagens que deixaram para você</h5>
                        <hr/>
                    </div>

					<div class="columns large-12 userpage geral_lista_comentarios" 
                         tal:condition="items">
                        
                        <div class="container">
                            
                            <input type="hidden" id="b_size" tal:attributes="value b_size" />
                            <input type="hidden" id="b_start" tal:attributes="value b_start" />
                            <input type="hidden" id="absolute_url" tal:attributes="value string:${context/portal_url}/myvindulalistrecados" >
    						
                            <tal:rep tal:repeat="item batch">
    							<div class="comment item_lista" 
                                     tal:attributes="id item/hash;">
                                         
    							    <div metal:use-macro="context/macro-myvindula-documentByLine/macros/page"> </div>
    
    								<!--div id="like" tal:condition="not: isAnonymous">
    									<div tal:attributes="id item/id|nothing">
    										<input type="hidden" name="isPlone:boolean" id="isPlone" value="False" />
    										<input type="hidden" name="type" id="type" value="ModelsMyvindulaRecados" />
    									</div>
    									<div metal:use-macro="context/myvindula-like-macro/macros/like" />
    								</div-->
                                    
    				                <div class="comment-body">
    				                    <p tal:replace="structure item/text|nothing" />
    						  		</div>
                                    
                                    <a class="delete-message vindula-icon-cross-2"
                                       tal:attributes="href string: ${context/portal_url}/vindula-api/social/personal/delete_message;
                                                       data-hash item/hash;">
                                    </a>
    
    								<!-- Responde / Excluir recados
    								<div id="comments" class="bt_comentar" tal:condition="not: isAnonymous" >
    									<a>
    										<input type="button" tal:attributes="onClick string: location.href='${context/portal_url}/myvindulalistuser?user=${item/username}&scraps=true'"
        										   class="comments bt_comments" value="Responder" />
    									</a>
    									<form action="#" method="post" enctype="multipart/form-data" style="float:right"
                                              tal:attributes="action string:${context/absolute_url}/myvindulalistrecados">
    
                                            <input type="hidden" name="form.excluir:boolean" value="True" />
                                            <input type="hidden" name="id_recado" id="id_recado" tal:attributes="value item/id|nothing" />
    
                                            <--input type="submit" name="excluir" id="excluir" value="Excluir"
                                                   onclick="return confirmExcluirRecados();"
                                                                 class="bt_comments" tal:attributes="id item/id|nothing" /--
                                        </form>
    								</div>
                                    -->
                                    <br/>
    							</div>
    						</tal:rep>
                            
                            <br/>
                            
                            <div id="paginacao">
                                <div id="size-nav" class="left">
                                    <p>
                                        <span tal:content="python:'Total: ('+str(len(items))+')'">Total (XX)</span>
                                        |
                                        <span tal:define="css python:'font-weight:bolder;;'">Itens por página:
                                            <a class="c-pointer" id="itenspage" href="#"
                                               tal:attributes="style python:b_size == '10' and css or '' ">10</a>,
                                            <a class="c-pointer" id="itenspage" href="#"
                                               tal:attributes="style python:b_size == '20' and css or '' ">20</a>,
                                            <a class="c-pointer" id="itenspage" href="#"
                                               tal:attributes="style python:b_size == '30' and css or '' ">30</a>,
                                            <a class="c-pointer" id="itenspage" href="#"
                                               tal:attributes="style python:b_size == '40' and css or '' ">40</a>
                                        </span>
                                    </p>
                                </div>
                                <div id="pag-nav" class="right">
                                    <metal:block metal:use-macro="context/boll_batch/macros/navigation" />
                                </div>
                            </div>
                        </div>
					</div>
    			</div>
    		</div>
        </div>
    </body>
</html>